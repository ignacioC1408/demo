<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Ventas - Punto FÃ¡cil</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link rel="icon" th:href="@{/images/logo.png}" href="/images/logo.png">
  <link rel="stylesheet" th:href="@{/css/panel.css}" href="/css/ventas.css">


</head>

<body class="d-flex flex-column min-vh-100">
  <!-- NAVBAR -->
  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg shadow-sm topbar">
    <div class="container-fluid d-flex justify-content-between align-items-center px-3 px-md-4">
      <!-- LOGO / TÃTULO -->
      <div class="d-flex align-items-center gap-2">
        <img th:src="@{/images/logo.png}" src="/images/logo.png" alt="Logo" class="logo">
        <h5 class="m-0 fw-bold text-white">Punto FÃ¡cil</h5>
      </div>
      <!-- BOTONES -->
      <div class="d-flex align-items-center gap-2">
        <a th:href="@{/empleado/panel/inicio}" class="btn btn-sm text-white">
          <i class="fas fa-home me-1"></i>Inicio
        </a>

        <!-- Productos -->
        <a th:href="@{/empleado/productos}" class="btn btn-sm text-white">
          <i class="fas fa-tags me-1"></i>Productos
        </a>

        <!-- Ventas (activo) -->
        <a th:href="@{/empleado/panel/ventas}" class="btn btn-sm active">
          <i class="fas fa-cash-register me-1"></i>Ventas
        </a>

        <div class="text-white small ms-2 d-none d-md-block">
          Bienvenido: <strong th:text="${username}">Usuario</strong> |
          Rol: <strong th:text="${rol}">ADMIN</strong>
        </div>

        <a th:href="@{/empleado/logout}" class="btn btn-sm ms-1 text-white">
          <i class="fas fa-sign-out-alt me-1"></i>Salir
        </a>
      </div>
    </div>
  </nav>

  <!-- CONTENIDO -->
  <main class="container my-4 my-md-5 flex-grow-1">
    <div class="card shadow-sm p-4">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="fw-bold m-0"><i class="fas fa-cash-register me-2"></i>Ventas (Pedidos pagados)</h3>
      </div>

      <!-- KPIs -->
      <div class="row g-3 mb-4">
        <!-- Ventas de hoy -->
        <!-- Ventas de hoy -->
        <div class="col-12 col-md-6">
          <div class="card shadow-sm border-0 h-100 kpi">
            <div class="card-body d-flex align-items-center justify-content-between">
              <div class="d-flex align-items-center gap-3">
                <div class="icon" style="background:#e8f7ef;">
                  <i class="fas fa-bolt" style="color:#198754;"></i>
                </div>
                <div>
                  <div class="small text-muted">
                    Ventas totales (hoy + rango)
                    <span class="text-muted">29/10/2025</span>
                  </div>
                  <!-- ðŸ”¹ AquÃ­ el cambio de la lÃ­nea -->
                  <div class="h5 m-0 fw-bold">
                    $24.280,00
                  </div>
                </div>
              </div>
              <span class="badge bg-success">Actual</span>
            </div>
          </div>
        </div>

        <!-- Ventas totales (hoy + rango) -->
        <div class="col-12 col-md-6">
          <div class="card shadow-sm border-0 h-100 kpi">
            <div class="card-body d-flex align-items-center justify-content-between">
              <div class="d-flex align-items-center gap-3">
                <div class="icon" style="background:#e8f7ef;">
                  <i class="fas fa-bolt" style="color:#198754;"></i>
                </div>
                <div>
                  <div class="small text-muted">
                    Ventas totales (hoy + rango)
                    <span class="text-muted">29/10/2025</span>
                  </div>
                  <!-- ðŸ”¹ Total combinado -->
                  <div class="h5 m-0 fw-bold">$607.220,00</div>
                  <div class="small text-muted">Incluye mÃ¡s de 100 ventas registradas</div>
                </div>
              </div>
              <span class="badge bg-success">Actual</span>
            </div>
          </div>
        </div>


        <!-- FILTRO -->
        <form class="row g-3 align-items-end mb-4" th:action="@{/empleado/panel/ventas}" method="get">
          <div class="col-sm-4 col-md-3">
            <label class="form-label small text-muted">Desde</label>
            <input type="date" name="desde" class="form-control form-control-sm" th:value="${desde}" required>
          </div>
          <div class="col-sm-4 col-md-3">
            <label class="form-label small text-muted">Hasta</label>
            <input type="date" name="hasta" class="form-control form-control-sm" th:value="${hasta}" required>
          </div>
          <div class="col-sm-4 col-md-2">
            <button type="submit" class="btn btn-primary w-100 btn-sm">
              <i class="fas fa-filter me-1"></i>Filtrar
            </button>
          </div>
          <!-- Accesos rÃ¡pidos -->
          <div class="col-12">
            <div class="d-flex flex-wrap gap-2">
              <a th:href="@{'/empleado/panel/ventas'(
                desde=${#temporals.format(hoy, 'yyyy-MM-dd')},
                hasta=${#temporals.format(hoy, 'yyyy-MM-dd')}
              )}" class="btn btn-outline-primary btn-sm">Hoy</a>

              <a th:href="@{'/empleado/panel/ventas'(
                desde=${#temporals.format(lunesSemana, 'yyyy-MM-dd')},
                hasta=${#temporals.format(hoy, 'yyyy-MM-dd')}
              )}" class="btn btn-outline-primary btn-sm">Esta semana</a>

              <a th:href="@{'/empleado/panel/ventas'(
                desde=${#temporals.format(primerDiaMes, 'yyyy-MM-dd')},
                hasta=${#temporals.format(hoy, 'yyyy-MM-dd')}
              )}" class="btn btn-outline-primary btn-sm">Este mes</a>
            </div>
          </div>
        </form>

        <!-- TABLA -->
        <!-- TABLA -->
        <div class="table-responsive">
          <table class="table table-striped table-hover align-middle">
            <thead class="table-light">
              <tr>
                <th>#</th>
                <th>Fecha</th>
                <th>Cliente</th>
                <th>Total</th>
                <th>Estado</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <!-- ðŸ”¹ SimulaciÃ³n de dos ventas -->
              <tr>
                <td>1</td>
                <td>29/10/2025 10:24</td>
                <td>MarÃ­a LÃ³pez</td>
                <td>$15.850,00</td>
                <td><span class="badge bg-success">PAGADO</span></td>
                <td>
                  <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal"
                    data-bs-target="#detalleVenta1">
                    <i class="fas fa-eye me-1"></i> Ver detalle
                  </button>
                </td>
              </tr>

              <tr>
                <td>2</td>
                <td>29/10/2025 14:57</td>
                <td>Juan PÃ©rez</td>
                <td>$8.430,00</td>
                <td><span class="badge bg-success">PAGADO</span></td>
                <td>
                  <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal"
                    data-bs-target="#detalleVenta2">
                    <i class="fas fa-eye me-1"></i> Ver detalle
                  </button>
                </td>
              </tr>
              <!-- ðŸ”¹ Fin de ventas simuladas -->

              <tr th:if="${#lists.isEmpty(pedidos)}">
                <td colspan="6" class="text-center text-muted">No hay ventas en el rango seleccionado.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- === MODALES DE DETALLE === -->

        <!-- Modal Venta 1 -->
        <div class="modal fade" id="detalleVenta1" tabindex="-1" aria-labelledby="detalleVenta1Label"
          aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
              <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="detalleVenta1Label"><i class="fas fa-receipt me-2"></i>Detalle de Venta #1
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
              </div>
              <div class="modal-body">
                <p><strong>Cliente:</strong> MarÃ­a LÃ³pez</p>
                <p><strong>Fecha:</strong> 29/10/2025 10:24</p>
                <p><strong>MÃ©todo de pago:</strong> Mercado Pago</p>

                <hr>
                <h6 class="fw-bold">Productos:</h6>
                <ul class="mb-3">
                  <li>Detergente Ariel x3kg â€” <strong>$6.500</strong></li>
                  <li>Suavizante EnsueÃ±o x1L â€” <strong>$2.850</strong></li>
                  <li>Escoba Premium â€” <strong>$6.500</strong></li>
                </ul>

                <div class="text-end fw-bold fs-5">
                  Total: $15.850,00
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Modal Venta 2 -->
        <div class="modal fade" id="detalleVenta2" tabindex="-1" aria-labelledby="detalleVenta2Label"
          aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
              <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="detalleVenta2Label"><i class="fas fa-receipt me-2"></i>Detalle de Venta #2
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
              </div>
              <div class="modal-body">
                <p><strong>Cliente:</strong> Juan PÃ©rez</p>
                <p><strong>Fecha:</strong> 29/10/2025 14:57</p>
                <p><strong>MÃ©todo de pago:</strong> Mercado Pago</p>

                <hr>
                <h6 class="fw-bold">Productos:</h6>
                <ul class="mb-3">
                  <li>Pan de campo â€” <strong>$2.000</strong></li>
                  <li>Leche La SerenÃ­sima x1L â€” <strong>$1.230</strong></li>
                  <li>AzÃºcar Ledesma x1kg â€” <strong>$1.200</strong></li>
                  <li>Yerba Playadito x1kg â€” <strong>$4.000</strong></li>
                </ul>

                <div class="text-end fw-bold fs-5">
                  Total: $8.430,00
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
              </div>
            </div>
          </div>
        </div>

      </div>
  </main>

  <footer class="text-center py-3 mt-auto">Â© 2025 Punto FÃ¡cil. Todos los derechos reservados.</footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>